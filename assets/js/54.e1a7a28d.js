(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{281:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("p",[t._v("The default API implementation - "),e("code",[t._v("packages/default-vsf")]),t._v(" - is compatible with Vue Storefront. You might want to implement the API using totally different formats by creating a "),e("router-link",{attrs:{to:"./../modules/tutorial.html"}},[t._v("new module")]),t._v(" based on one of the default modules or the boilerplates: "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/tree/develop/src/modules/template-module",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("template-module")]),e("OutboundLink")],1),t._v(" and "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/tree/develop/src/modules/sample-api",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("sample-api")]),e("OutboundLink")],1)],1),t._v(" "),t._m(4),t._v(" "),e("p",[t._v("This module is in charge of providing the standard "),e("a",{attrs:{href:""}},[t._v("GraphQL Schema")]),t._v(" and ElasticSearch entities, and for providing Vue Storefront compatibility - including integrations with Magento1, Magento2, Spree and other platforms. You might want to use this module to implement your own "),e("router-link",{attrs:{to:"./../integration/integration.html"}},[t._v("custom backend integration")]),t._v(". If your backend platform uses different data formats, it might be easier to comment out the default module from "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/blob/develop/src/modules/index.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("modules entry point"),e("OutboundLink")],1),t._v(" and create a new one.")],1),t._v(" "),t._m(5),t._v(" "),e("p",[t._v("This module implements a REST API covering most of the operations an eCommerce platform can have - including "),e("code",[t._v("user")]),t._v(", "),e("code",[t._v("cart")]),t._v(", "),e("code",[t._v("order")]),t._v(", "),e("code",[t._v("review")]),t._v(" and other modules. The cool part is that it's compatible with Vue Storefront and most of the existing integrations we have for it. If you'd like to integrate this API with your own custom backend, you might want to follow the "),e("router-link",{attrs:{to:"./../integration/integration.html"}},[t._v("custom backend integration tutorial")]),t._v(". This module uses "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/tree/develop/src/platform",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("platform")]),e("OutboundLink")],1),t._v(" drivers. You may want to implement your own custom driver. The other way around this is to disable the "),e("code",[t._v("default-vsf")]),t._v(" module and create a new API from scratch, using the "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/tree/develop/src/modules/sample-api",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("simple-api")]),e("OutboundLink")],1),t._v(".")],1),t._v(" "),t._m(6),t._v(" "),e("p",[t._v("This module is an image resizer which is compatible with Vue Storefront, the "),e("code",[t._v("default-catalog")]),t._v(" module and the "),e("router-link",{attrs:{to:"./../default-modules/platforms.html"}},[t._v("platform concept")]),t._v(". It takes the "),e("code",[t._v("baseUrl")]),t._v(" from the "),e("code",[t._v("config[config.platform]")]),t._v(" section by default and, based on that, generates the thumbnail or crops the picture.")],1),t._v(" "),t._m(7),t._v(" "),e("p",[t._v("Modules are located in "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/tree/develop/src/modules",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("src/modules")]),e("OutboundLink")],1),t._v(". However, you can easily load "),e("code",[t._v("npm")]),t._v(" based modules just by "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/blob/develop/src/modules/index.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("referencing them in the modules entry point"),e("OutboundLink")],1),t._v(". In the same way, you can disable the default e-Commerce modules that are provided within the "),e("code",[t._v("default-catalog")]),t._v(", "),e("code",[t._v("default-vsf")]),t._v(" and "),e("code",[t._v("default-img")]),t._v(" folders.")]),t._v(" "),t._m(8),t._v(" "),e("p",[t._v("The interfaces must be referenced prior to use in the "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/blob/develop/src/modules/index.ts",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("src/modules/index.ts")]),e("OutboundLink")],1),t._v(" entrypoint:")]),t._v(" "),t._m(9),e("p",[t._v("Each module file returns the "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/blob/a66222768bf7fb5f54acf268b6a0bb4e0f94a4cf/src/lib/module/types.ts#L24",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("StorefrontApiModule")]),e("OutboundLink")],1),t._v(" structure:")]),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._v(" "),e("p",[t._v("There is no required module structure. However, modules typically contain the following folder structure ("),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/tree/develop/src/modules/template-module",target:"_blank",rel:"noopener noreferrer"}},[t._v("example"),e("OutboundLink")],1),t._v("):")]),t._v(" "),t._m(13),t._m(14),t._v(" "),e("p",[t._v("All the infrastructure is there. You might want to check how "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/blob/a66222768bf7fb5f54acf268b6a0bb4e0f94a4cf/src/modules/default-catalog/graphql/elasticsearch/product/resolver.js#L94",target:"_blank",rel:"noopener noreferrer"}},[t._v("default-catalog"),e("OutboundLink")],1),t._v(" queries the data. However, this example is pretty complicated as it uses special Query adapters for advanced filtering.")]),t._v(" "),e("p",[t._v("The simplest example was presented in the "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/blob/develop/src/modules/template-module/graphql/hello/resolver.ts",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("template-module")]),e("OutboundLink")],1),t._v(":")]),t._v(" "),t._m(15),e("p",[t._v("As you can see, "),e("a",{attrs:{href:"http://bodybuilder.js.org/",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("bodybuilder")]),e("OutboundLink")],1),t._v(" is included along with the elastic client - ready for your commands!")]),t._v(" "),t._m(16),t._v(" "),e("p",[t._v("Please read the "),e("router-link",{attrs:{to:"./tutorial.html"}},[t._v("tutorial.md")]),t._v(". The simplest way is to just copy the "),e("a",{attrs:{href:"https://github.com/DivanteLtd/storefront-api/tree/develop/src/modules/template-module",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("template-module")]),e("OutboundLink")],1),t._v(".")],1),t._v(" "),t._m(17),t._v(" "),e("p",[t._v("There is no explicit way to extend the existing modules other than just creating a new module and using composition (importing the elements you'd like to reuse from the base/fallback module).")])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"storefront-api-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storefront-api-modules"}},[this._v("#")]),this._v(" Storefront API Modules")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("We designed Storefront API ("),s("code",[this._v("SFAPI")]),this._v(") using a fully modular architecture. We composed the modules engine using the Inversion of Control principle. In this particular case it means that each module has full control over core "),s("code",[this._v("SFAPI")]),this._v(" features, including:")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("GraphQL schema")]),t._v(" "),e("li",[t._v("GraphQL middlewares")]),t._v(" "),e("li",[t._v("ElasticSearch schema")]),t._v(" "),e("li",[t._v("REST API Endpoints")]),t._v(" "),e("li",[t._v("REST API Middlewares")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"default-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-modules"}},[this._v("#")]),this._v(" Default modules")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"default-catalog-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-catalog-module"}},[this._v("#")]),this._v(" default-catalog module")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"default-vsf-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-vsf-module"}},[this._v("#")]),this._v(" default-vsf module")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"default-img-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-img-module"}},[this._v("#")]),this._v(" default-img module")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"where-can-i-find-my-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#where-can-i-find-my-modules"}},[this._v("#")]),this._v(" Where can I find my modules?")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"what-does-the-module-interface-look-like"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-does-the-module-interface-look-like"}},[this._v("#")]),this._v(" What does the module interface look like?")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" DefaultVuestorefrontApiModule "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@storefront-api/default-vsf'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" DefaultCatalogModule "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@storefront-api/default-catalog'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" magento2 "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@storefront-api/platform-magento2'")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("DefaultVuestorefrontApiModule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    platform"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'magento2'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      platformImplementation"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" magento2\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  DefaultCatalogModule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" TemplateModule"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" StorefrontApiModule "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StorefrontApiModule")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  key"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'template-module'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** Return the GraphQL schema and resolvers */")]),t._v("\n  initGraphql"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" db"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" StorefrontApiContext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("GraphqlConfiguration")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      resolvers"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      schema"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      hasGraphqlSupport"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** Return ElasticSearch mappings - you might extend existing entities (deepMerge will be executed on the types) */")]),t._v("\n  loadMappings"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" db"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" StorefrontApiContext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ElasticSearchMappings")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      schemas"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'custom'")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadSchema")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'elasticsearch'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'custom'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'elasticsearch.apiVersion'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** Here you can just extend the default Express.js application */")]),t._v("\n  initApi"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" db"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" StorefrontApiContext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" api "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Router")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// mount the order resource")]),t._v("\n    api"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/version'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" db "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerExtensions")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" db"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" registeredExtensions"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'modules.templateModule.registeredExtensions'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" rootPath"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'api'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'extensions'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// api router")]),t._v("\n    app"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/template'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" api"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("Please note:")]),this._v(" You don't have to implement all the methods. If your module adds some graphql entities, please feel free to implement "),s("code",[this._v("initGraphql")]),this._v(" and leave the other functions un-implemented.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"what-does-the-default-module-structure-look-like"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#what-does-the-default-module-structure-look-like"}},[this._v("#")]),this._v(" What does the default module structure look like?")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____graphql                        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# graphql resolvers and schema")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____resolvers.js                 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# resolvers.js and schema.js returns the array of typedefs and resolvers using fileLoader()")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____schema.js\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____hello                        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# you might want to have your schema in subfolders **.* is used for loading it")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____schema.graphqls\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____resolver.js\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____api                            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# typically the API is divided into subfolders as well")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____version.js\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____extensions\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____index.ts\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____elasticsearch                  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# json objects compatbible with Elastic Mappings")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("____elastic.schema.custom.json\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"how-can-i-query-elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-can-i-query-elasticsearch"}},[this._v("#")]),this._v(" How can I query ElasticSearch?")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("    "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("testElastic")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" sku "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" rootValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" client "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" es"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClient")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" esQuery "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" es"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("adjustQuery")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        index"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue_storefront_catalog'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// current index name")]),t._v("\n        type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'product'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        body"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bodybuilder")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'terms'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'visibility'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("andFilter")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'term'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'status'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("andFilter")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'terms'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sku'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sku"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'product'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" response "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" es"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResponseObject")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" client"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("search")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("esQuery"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hits"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hits"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" el"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_source "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"how-do-i-create-a-new-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-do-i-create-a-new-module"}},[this._v("#")]),this._v(" How do I create a new module?")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"is-there-a-way-to-extend-the-default-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#is-there-a-way-to-extend-the-default-modules"}},[this._v("#")]),this._v(" Is there a way to extend the default modules?")])}],!1,null,null,null);s.default=n.exports}}]);